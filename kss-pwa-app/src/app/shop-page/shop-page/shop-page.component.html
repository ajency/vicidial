<app-header></app-header>

<!-- <app-loader *ngIf="showLoader"></app-loader> -->


<section class="productlist">
	<div class="container mt-2 mt-md-4">

		<!-- Top Filters -->
		<div id="filter-header-template-content">
		  <div class="d-flex align-items-sm-center">

		  	<!-- Products founds -->
		    <div class="flex-fill-full">
	    	    <app-breadcrums [breadcrumbs]=""></app-breadcrums>
	    	    <div *ngIf="showLoader" class="loadingBg" style="height: 15px; width: 180px"></div>
		        <h1 *ngIf="listPage && listPage.headers" class="w-100 kss-title my-1 py-1 my-sm-0 py-sm-0 m-0 text-gray font-weight-bold">
		            {{listPage.headers.page_title}} <span class="f-w-4 sub-text"> - {{listPage.headers.product_count}} items</span>
		        </h1>
		    </div>
		    <!-- End of Products founds -->

		    <div class="ml-sm-auto d-none d-sm-flex flex-fill-full justify-content-end">

			<!-- Search Box -->
			<app-search-box (updateList)="searchByText($event)" [defaultText]="'shirts'"></app-search-box>

		      <!-- Sort By -->
		      <div class="d-flex flex-row kss-select-border">
		        <div class="size-qty align-self-center">
		          <h6 class="m-0 f-w-4 sub-text"> Sort By:</h6>
		        </div>
		        <div class="pl-2 align-self-center">
		          <select id="sort_filter_selectbox" class="size form-control  form-control-sm br-0  border-dark custom" [(ngModel)]="sortOn" (change)="sortBy()">
		            <option *ngFor="let option of sort_on" value="{{option.value}}" [attr.selected]="option.is_selected">{{option.name}}</option>
		          </select>
		        </div>
		      </div>
					<!-- End of Sort By -->

		    </div>
		  </div>
		</div>
		<!-- End of Top Filters -->

		<hr class="d-none d-sm-block">

	 	<div class="row">
	 		<div class="col-sm-12 col-md-3 col-left">
	 			<div id="accordion" class="kss_filter d-sm-block" [ngClass]="mobilefilter ? 'kss_filter_mobile' : ''">
		 			<div class="d-flex">
			            <!-- mobile filter -->
		 					<!-- mf top header -->
		 					<div class="d-md-none d-block sticky-mob-filter py-0">
							  <div class="d-flex align-items-center">
							    <div class="filter-head">
							      <h4 class="my-0" style="padding: 14px 0;">Filters</h4>
							    </div>
							    <div class="ml-auto"> <h3 id="kss_hide-filter-close" class="m-0 kss_highlight btn-pay pl-3 py-2" (click)="showMobileFilter()"><span aria-hidden="true">&times;</span></h3></div>
							  </div>
							</div>
							<!-- end of mf top header -->

							<!-- mf tabs -->
							<ul class="nav flex-column kss_filter_mobile--left">
							  <li *ngFor="let filter of filters" class="nav-item" [attr.data-target]="'#'+filter.header.facet_name" (click)="selectedFilterCategory = filter.header.facet_name" [ngClass]="{'active' : selectedFilterCategory == filter.header.facet_name}">
							  	{{filter.header.display_name}}
									<!-- <small class="filter-count" >2</small> -->
								</li>
							</ul>
							<!-- end of mf tabs -->
		 				<!-- end of mobile filter -->

				            <!-- Filters go here -->
				            <div class="kss_filter_mobile--right w-100">
				            	<div *ngIf="showFilterLoader">
				            		<div *ngFor="let dummy of ' '.repeat(4).split(''), let x = index">
					            		<div class="loadingBg w-100 mb-3" style="height: 21px;"></div>
					            		<ul class="list-unstyled" *ngFor="let dummy of ' '.repeat(4).split(''), let x = index">
					            			<li class="mb-2">
					            				<div class="d-flex w-100">
					            					<div class="loadingBg" style="height: 15px; width: 15px; margin-right: 15px;"></div>
					            					<div class="loadingBg" style="height: 15px; width: 100px"></div>
					            				</div>
					            			</li>
					            		</ul>
					            		<hr>
				            		</div>
				            	</div>
				              <!-- Filter Checkbox -->
				              	<ng-container *ngFor="let filter of filters">
					            	<app-filter-checkbox [filter]="filter" [isMobile]="isMobile" [selectedFilterCategory]="selectedFilterCategory" (filterApplied)="applyCheckboxFilter($event)" (rangeFilterApplied)="applyRangeFilter($event)"></app-filter-checkbox>
					            </ng-container>
				              <!-- Filter Range -->
				              <!-- <app-filter-range></app-filter-range> -->

				            </div>
				            <!-- End of Filters go here -->

			 			<!-- Filter actions for mobiles -->
			 			<div class="fixed-bottom d-none footer-filter">
							<div class="row no-gutters">
								<div class="col-6 text-center d-flex">
									<button type="button" class="btn kss-btn kss-btn--big kss-btn--link" (click)="resetFilters()">Reset</button>
								</div>
								<div class="col-6 text-center d-flex">
									<button type="button" id="kss_hide-filter" class="btn kss-btn kss-btn--big" (click)="callListPageApi()">Apply</button>
								</div>
							</div>
			            </div>
				    <!-- End of Filter actions for mobiles -->
		 			</div>
	 			</div>
	 		</div>

	 		<div class="col-sm-12 col-md-9 bl-1 col-right">

				<!-- Active filters -->
					<div id="filter-tags-template-content">
					  <div class="d-none d-md-block filter-selection">
					    <div class="d-flex flex-wrap">
					        <div class="border border-dark py-1 px-2 mr-2 mb-2 active-filter"><span data-slug="apparels">Apparels</span> <span class="ml-1 h6 kss_highlight" aria-hidden="true" onclick="removeFilterTag('apparels','product_category_type');">Ã—</span></div>
					    </div>
					  </div>
					</div>
				<!-- End of Active filters -->


				<!-- Product Loader -->
				<div class="prod_load d-none">
					<i class="fas fa-circle-notch fa-spin fa-lg"></i>
				</div>
				<!-- End of Product Loader -->

				<!-- Product List -->
					<div id="products-list-template-content" class="productlist__row">
						<ng-container *ngIf="listPage && listPage.items.length; else noResults">
							<div  id="card-list" class="row">
								<!-- Start Product column -->
								<div *ngFor="let item of listPage.items | paginate: config" class="col-lg-3 col-md-6 mb-sm-4 col-6 layout-type-1">
									<app-product-view [product]="item" [showLoader]="showLoader" [listPage]=true></app-product-view>
								</div>
							</div>

							<!-- Pagination -->
							<!-- <div class="kss-pagination mt-5">
								<span class="kss-pagination__prev controls pr-md-4 d-flex 9" [ngClass]="{'disabled' : !page.has_previous}">
									<a href="javascript:void(0)">
										<span class="pr-2"><i class="fas fa-chevron-left"></i></span>
										<span class="d-flex">Previous <span class="d-none d-md-block">Page</span></span>
									</a>
								</span>

								<div class="page-numbers d-none d-md-flex">
										<span class="current">1</span>
										<span class="kss-pagination__link">
											<a href="#">2</a>
										</span>
									<span class="dot-more">...</span>
									<span class="kss-pagination__last disabled">7</span>
								</div>

								<span class="kss-pagination__next controls pl-md-4 d-flex" [ngClass]="{'disabled' : !page.has_next}">
									<a href="javascript:void(0)">
										<span class="d-flex">Next <span class="d-none d-md-block">Page</span></span>
										<span class="pl-2"><i class="fas fa-chevron-right"></i></span>
									</a>
								</span>

							</div> -->
							<ng-container *ngIf="listPage && listPage.page.total > 1; else noPagination">
								<pagination-template #p="paginationApi"
								                     [id]="config.id"
								                     (pageChange)="pageChanged($event)"
								                     responsive="true"
								                     previousLabel="Previous Page"
								                     nextLabel="Next Page"
								                     maxSize="6">

				                     <div class="kss-pagination mt-5">
				                     	<span class="kss-pagination__prev controls pr-md-4 d-flex 9" [class.disabled]="p.isFirstPage()">
				                     		<a  (click)="p.previous()" >
				                     			<span class="pr-2"><i class="fas fa-chevron-left"></i></span>
				                     			<span class="d-flex">Previous <span class="d-none d-md-block">Page</span></span>
				                     		</a>
				                     	</span>

				                     	<div class="page-numbers d-none d-md-flex" >
				                     		<div *ngFor="let page of p.pages">
				                     			<span class="kss-pagination__link" *ngIf="p.getCurrent() !== page.value">
				                     				<a (click)="p.setCurrent(page.value)" >{{ page.label }}</a>
				                     			</span>
					                     		<span *ngIf="p.getCurrent() === page.value" [class.current]="p.getCurrent() === page.value">{{ page.label }}</span>
				                     		</div>
				                     	</div>

				                     	<span class="kss-pagination__next controls pl-md-4 d-flex" [class.disabled]="p.isLastPage()">
				                     		<a *ngIf="!p.isLastPage()" (click)="p.next()">
				                     			<span class="d-flex">Next <span class="d-none d-md-block">Page</span></span>
				                     			<span class="pl-2"><i class="fas fa-chevron-right"></i></span>
				                     		</a>
				                     	</span>

				                     </div>
								</pagination-template>
								<!-- End of Pagination -->
							</ng-container>

							<!-- If total number of pages is 1 -->
							<ng-template #noPagination>
								<p class="my-4 product-view text-center">You've viewed {{listPage.page.total_item_count}} products</p>
								<div class="kss-progress-bar">
								  	<div class="kss-progress-bar__loader" style="width:100%;"></div>
								</div>
							</ng-template>
							<!-- If total number of pages is 1 end -->
						</ng-container>

						<!-- If no results -->
						<ng-template #noResults>
							<div class="row">
							    <div class="col-12 text-center my-4">
						            <img src="/assets/img/empty_troly.png" class="img-fluid lazyload" width="400px" />
						            <h2 class="my-4">Sorry, no results found!</h2>
							    </div>
							</div>
						</ng-template>
						<!-- If no results end-->

					</div>
				<!-- End of Product List -->
	 		</div>
	 	</div>
 	</div>
	<!-- End of Mobile Filter -->

	<!-- Mobile Sort by -->
		<div id="mobile-filter-sort-template-content">
		 	<div class="modal fade list-sort" id="kss_sort" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	      <div class="modal-dialog m-0 fixed-bottom" role="document">
	        <div class="modal-content fixed-bottom">
	          <div class="modal-header">
	            <h6 class="modal-title text-muted" id="exampleModalLongTitle">Sort by</h6>
	            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	              <span aria-hidden="true">&times;</span>
	            </button>
	          </div>
	          <div class="">
	            <ul class="list-group list-unstyled list-sort__element mb-0">
	              <li *ngFor="let option of sort_on" class="list-group-item d-flex align-items-center" [ngClass]="{'is-active' : option.is_selected}" data-value="" (click)="sortBy(option.value)">
	                <a href="javascript:void(0)" class="font-weight-bold d-flex align-items-center"><i class="kss_icon mx-1 {{option.class}}"></i>{{option.name}}</a>
	              </li>
	            </ul>
	          </div>
	        </div>
	      </div>
	    </div>
		</div>
	<!-- End of Mobile Sort by -->

	<div class="fixed-bottom d-block d-md-none sticky-xs-btn">
		<div class="row no-gutters">
			<div class="col-6 text-center b-r">
				<button data-toggle="modal" data-target="#kss_sort" type="button" class="btn btn-lg btn-block h-100 text-uppercase btn-white d-flex align-items-center justify-content-center sort-btn">
				<svg version="1.1" viewBox="0 0 24 24" enable-background="new 0 0 24 24" class="mr-2 sort-icon"><g><path d="M9,0C8.7,0,8.5,0.1,8.3,0.3l-8,8C0.1,8.5,0,8.7,0,9c0,0.3,0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3   c0.3,0,0.5-0.1,0.7-0.3l0,0l2-2C5.4,8.8,6,9,6,9.5V23c0,0.5,0.5,1,1,1h2c0.5,0,1-0.5,1-1V1c0-0.3-0.1-0.5-0.3-0.7   C9.5,0.1,9.3,0,9,0z"/><path d="m23.7,14.3l-1.4-1.4c-0.2-0.2-0.5-0.3-0.7-0.3-0.3,0-0.5,0.1-0.7,0.3l-2,2c-0.3,0.3-0.9,0.1-0.9-0.4v-13.5c0-0.5-0.5-1-1-1h-2c-0.5,0-1,0.5-1,1v22c0,0.3 0.1,0.5 0.3,0.7s0.5,0.3 0.7,0.3c0.3,0 0.5-0.1 0.7-0.3l8-8c0.2-0.2 0.3-0.4 0.3-0.7 0-0.3-0.1-0.5-0.3-0.7z"/></g>
				</svg>
				<span class="text-black">Sort</span></button>
			</div>
		  <div class="col-6 text-center">
				<button id="filter" type="button" class="btn btn-lg btn-block btn-primary h-100 text-uppercase rounded-0 filter-btn" (click)="showMobileFilter()"><i class="fa-filter fas pr-1 text-black"></i> <span class="text-black">Filter</span></button>
		  </div>
		</div>
	</div>
	<!-- Mobile Filter -->
</section>

<app-page-not-found *ngIf="!showLoader && !listPage"></app-page-not-found>

<!-- Back to top -->
<div app-back-to-top></div>

<app-footer [stickyFoot]="true"> </app-footer>