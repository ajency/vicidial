

<div class="cart-step1-header">
	<nav class="navbar navbar-dark bg-dark pt-3 pb-3 ">
		<div class="d-flex align-items-center w-100">
			<div class="">
				<a>
					<img _ngcontent-c1="" class=" img-fluid m-0" src="/img/logo-kss.png" width="180px" xpreview="/img/logo-kss.png">
			 	</a>
			</div>
			<div class="ml-auto align-self-center">
				<h3 class="m-0 text-white kss_highlight btn-pay" (click)="closeWidget()"><span aria-hidden="true">×</span></h3>
			</div>
		</div>
	</nav>
</div>

<div [ngClass]="(orders && orders.length) ? 'my-order-bg' : 'mt-3' ">
	<div class="col-12 p-0 myorder-wrapper">
		<div class="h-100">
			<div class="d-flex align-items-top top-navbar pt-1">
	            <div class="pr-3 d-block">
	            	<a>		              	
		              	<h4 class="m-0 font-weight-bold back-to-cart">
			               <img (click)="navigateBack()" class="btn-back kss_highlight" src="/img/left-arrow.png" style="width:20px;">
			             </h4>
		          	</a>
	            </div>
	            <div class="">
	              <h4 class="font-weight-bold m-0">My Orders</h4>
	            </div>
	        </div>
			<hr>
			<div *ngIf="isLoggedIn() && !unverifiedUser; else unverified" class="my-order-parent accordion mb-4" id="accordionExample">
				<div *ngIf="orders && orders.length" class="my-order-child">
					<div *ngFor="let order of orders; let lastindex = last; let first = first; let getindex = index" class="child-2 my-order-card">
						<div class="d-flex row mb-2 order-header collapsed order-header-pos" data-toggle="collapse" [attr.data-target]="'#collapse-' + getindex" aria-expanded="true" [attr.aria-controls]="'collapse-' + getindex">
							<div class="col-9">
								<p class="m-0 pb-1">Order No. <strong>{{order.order_info.txn_no}}</strong></p>
								<p class="m-0 pb-1">Placed on. <strong>{{order.order_info.order_date}}</strong></p>
								<p class="m-0 pb-1">Total amount: <strong>₹{{order.order_info.total_amount}}</strong> </p>
								<div class="m-0 pb-1 d-flex align-items-center">Mode of payment:
								  	<h6 *ngIf="order.order_info.order_status == 'payment-successful'" class="font-weight-bold pl-1 m-0 ">Card Payment <!-- - <span class="text-success payment-status">PAID</span> --></h6>
								  	<h6 *ngIf="order.order_info.order_status == 'payment-failed' || order.order_info.order_status == 'payment-in-progress' " class="font-weight-bold pl-1 m-0 ">Card Payment - 
								  		<span *ngIf="order.order_info.order_status == 'payment-in-progress' " class="text-warning payment-status">PENDING</span> 
								  		<span *ngIf="order.order_info.order_status == 'payment-failed' " class="text-danger payment-status">FAILED</span> 
								  	</h6>
								  	<h6 *ngIf="order.order_info.order_status == 'cash-on-delivery'" class="font-weight-bold pl-1 m-0 ">Cash on Delivery</h6>
								</div>
							</div>
							<div class="col-3 text-right d-flex flex-column justify-content-between">
								<span class="ordercollapse-trigger"><i class="fas fa-chevron-up arrow-down"></i></span>
							</div>
							<div *ngIf="!order.order_info.verified" class="order-tooltip tooltip-wrapper">
								<div class="tooltip-icon"><i class="fas fa-info-circle"></i> Unverified</div>
								<div class="tooltip-msg">This Order was placed without mobile verification</div>
							</div>
						</div>
						<div class="collapse" [ngClass]="{'show': orders.length == 1}" id=collapse-{{getindex}} data-parent="#accordionExample">
							<app-order [items]="order.items" [showStatus]=false></app-order>
							<label class="pl-2">Order Summary</label>
							<div class="card shadow-sm mx-2">
							  <div class="card-body p-3 orderSummary">
							  	<app-bag-summary [summary]="order.order_summary"></app-bag-summary>
							     <hr class="dashed">
							     <div class="cd-cart-total pb-0">
							        <h5 class="font-weight-bold mb-0">
							           Total <span><i class="fas fa-rupee-sign"></i> {{order.order_summary.you_pay}}</span>
							        </h5>
							     </div> 
							  </div>
							</div>
						  	<div *ngIf="(order.order_summary.mrp_total + order.order_summary.shipping_fee) != order.order_summary.you_pay" class="card shadow-sm mt-3 mx-2">
						        <div class="card-body text-success d-flex">
						            <strong>Your Total Savings on this Order is <span> <i class="fas fa-rupee-sign sm-font pl-1"></i></span> {{order.order_summary.mrp_total + order.order_summary.shipping_fee - order.order_summary.you_pay}}</strong>
						         </div>
						    </div>

							<!-- <div class="border-top mt-2 mb-4 pt-2 pb-3 text-center">
								<a href="/my/order/details?orderid={{order.order_info.txn_no}}" class="btn text-secondary pb-0 pr-0 order-details-btn">Order Details <i class="fas fa-chevron-right"></i></a>
							</div> -->
							<div class="mt-2 mb-2 mx-2 pt-2 pb-3 text-center">
								<a class="btn text-secondary order-details-btn kss-btn kss-btn--big shadow-sm" (click)="navigateToOrderDetails(order)" >Order Details <i class="fas fa-chevron-right"></i></a>
							</div>
						</div>
						<!-- <hr *ngIf="!last"> -->
					</div>
				</div>
	<!-- 			<div *ngIf="orders && displayShowMore && apiCallComplete" class="text-center my-3">
					<button (click)="updateOrderParams()" class="btn btn-outline-cancel py-2"><i class="align-middle fa-circle-notch fa-lg fa-spin fas load-icon-cls mb-1 mr-1 d-none"></i> Show more</button>
				</div> -->
				<div *ngIf="apiCallComplete && orders && !orders.length" class="no-order-wrapper d-flex align-items-center justify-content-center">
					<div class="text-center d-flex align-items-center justify-content-center flex-column">
						<img src="/img/orders-empty.png" class="img-fluid" width="80">
						<!-- <h4>Can't see all your orders?</h4> -->
						<h5 class="pt-4 pb-2 mb-0" style="line-height: 1.5;">You havent placed any orders yet.</h5>
						<div class="mb-4">
							<a class="btn kss-btn kss-btn--secondary-link btn-pay" href="/shop">
								Let's do some shopping <i class="fas fa-chevron-right"></i>
							</a>
						</div>
						<ul class="d-flex flex-wrap d-sm-inline-block helper-links list-inline mt-sm-3">
							<li class="py-3 col-6 col-sm-12">
								<a href="/boys/junior-7-14-years--toddler-2-7-years/" class="font-weight-bold">Shop Boys</a>
							</li>
							<li class="py-3 col-6 col-sm-12">
								<a href="/girls/junior-7-14-years--toddler-2-7-years/" class="font-weight-bold">Shop Girls</a>
							</li>
							<li class="py-3 col-6 col-sm-12">
								<a href="/infant-0-2-years/" class="font-weight-bold">Shop Infants</a>
							</li>
							<li class="py-3 col-6 col-sm-12">
								<a href="/shoes/" class="font-weight-bold">Shop Shoes</a>
							</li>
						</ul>
						<!-- <button class="btn kss-btn kss-btn--big">
							Login
						</button> -->
					</div>
				</div>
			</div>

<!-- 			<div *ngIf="!isLoggedIn()" class="myorder-wrapper d-flex align-items-center justify-content-center">
				<div class="text-center d-flex align-items-center justify-content-center flex-column">
					<img src="/img/no-order-login.png" class="img-fluid" width="150">
					<h4 class="py-4 mb-0">Please login to see all your orders</h4>					
				</div>
			</div> -->
			<ng-template #unverified>
				<div>
					<!-- <h4 class="font-weight-bold mt-3 mb-0">My Orders</h4> -->
					<!-- <hr> -->
					<div class="mt-4 kss-flash kss-flash--info py-3">
						Can't see all your orders? <a href="javascript:void(0);" (click)="displayModal()" class="text-secondary font-weight-bold">Sign In</a>
					</div>
				</div>
			</ng-template>
		</div>
</div>

	<!-- <app-login-component (loginSuccess)="loginSucessTriggered()"> </app-login-component>  -->
</div>