function facetCategoryChange(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("change===");var l=!1,s=$(e).data("facet-name"),o=$(e).data("singleton"),i=$(e).data("slug");if(console.log(s),console.log($(e).prop("checked")+"==="+$(e).val()),0==a){if($(e).prop("checked"))if(facet_list.hasOwnProperty(s)){if(-1==facet_list[s].indexOf($(e).val()))if(console.log("singleton=="+o),0==o){console.log("RAT1====="),facet_list[s].push($(e).val());var n=filter_tags_list.findIndex(function(e){return e.slug==i});-1==n&&filter_tags_list.push({slug:i,value:$(e).val(),group:s}),l=!0}else{console.log("RAT2====="),facet_list[s]=[$(e).val()];var n=filter_tags_list.findIndex(function(e){return e.slug==i}),r=filter_tags_list.findIndex(function(e){return e.group==s});-1==n&&(-1==r?filter_tags_list.push({slug:i,value:$(e).val(),group:s}):(filter_tags_list.splice(r,1),filter_tags_list.push({slug:i,value:$(e).val(),group:s}))),l=!0}}else{console.log("RAT4====="),facet_list[s]=[$(e).val()];var n=filter_tags_list.findIndex(function(e){return e.slug==i});if(1==o){var r=filter_tags_list.findIndex(function(e){return e.group==s});-1==n&&(-1==r?filter_tags_list.push({slug:i,value:$(e).val(),group:s}):(filter_tags_list.splice(r,1),filter_tags_list.push({slug:i,value:$(e).val(),group:s})))}else-1==n&&filter_tags_list.push({slug:i,value:$(e).val(),group:s});console.log("filter_tags_list rat4===="),console.log(filter_tags_list),l=!0}else if(console.log("else=="),facet_list.hasOwnProperty(s)&&(console.log("RAT5====="),console.log("hasproperty=="+$(e).val()+"====="+facet_list[s].indexOf($(e).val())),console.log(facet_list[s]),facet_list[s].indexOf($(e).val())>-1)){if(console.log("len=="+facet_list[s].length),1==facet_list[s].length)delete facet_list[s],l=!0;else{var c=facet_list[s].indexOf($(e).val());-1!==c&&facet_list[s].splice(c,1),l=!0}var n=filter_tags_list.findIndex(function(e){return e.slug==i});filter_tags_list.splice(n,1)}}else{var _=$(e).val(),d=_.split(";"),g=$(e).val().replace(";","-");console.log(d),console.log("facet_name==="+s),range_facet_list[s]={},range_facet_list[s].min=d[0],range_facet_list[s].max=d[1],console.log("filter_tags_list before===="),console.log(filter_tags_list),console.log("filter_tags_list after===="),console.log(filter_tags_list);var p=-1;for(fitem in filter_tags_list)"price"==filter_tags_list[fitem].slug&&(p=fitem);filter_tags_list.splice(p,1),filter_tags_list.push({slug:i,value:g,group:s}),l=!0}console.log("filter_tags_list after===="),console.log(filter_tags_list),console.log(facet_list),console.log("range_facet_list=="),console.log(range_facet_list);var f=constructCategoryUrl(config_facet_names_arr,facet_list,facet_value_slug_assoc);if(console.log("listurl====",f),-1!==f.indexOf("?")?append_filter_str="&":append_filter_str="?",Object.keys(range_facet_list).length>0){console.log(s);for(ritem in range_facet_list){var u=range_facet_list[ritem].min,m=range_facet_list[ritem].max;f+=append_filter_str+"rf=price:"+u+"TO"+m}console.log(range_facet_list[s])}console.log("listurl====",f),ajax_data={search_object:{primary_filter:facet_list,range_filter:range_facet_list},listurl:f,page:page_val};var v=JSON.stringify(ajax_data);if(1==l){console.log("filter_tags_list==="),console.log(filter_tags_list);var h=document.getElementById("filter-tags-template").innerHTML,b=Handlebars.compile(h),y={};y.filter_tags_list=filter_tags_list,console.log("filter tags===="),console.log(y);var x=b(y);document.getElementById("filter-tags-template-content").innerHTML=x,1==t?$.ajax({method:"POST",url:"/api/rest/v1/product-list",data:v,dataType:"json",contentType:"application/json"}).done(function(e){console.log(e);var t={},a={};$.each(e,function(e,l){if("filters"==e){$.map(l,function(e){return e}).sort(function(e,t){return e.order-t.order}),$.each(l,function(e,t){console.log(t);var a=t.template;console.log("template=="+s);var l=document.getElementById("filter-"+a+"-template").innerHTML,s=Handlebars.compile(l),o=t.is_singleton;console.log("collapsable_load_values   1111 ======"),console.log(collapsable_load_values);var i=collapsable_load_values[t.header.facet_name],n=t.header.display_name,r=t.header.facet_name,c={};if(c.singleton=o,c.filter_type=void 0!=t.filter_type?t.filter_type:"primary_filter",c.display_count=void 0!=t.display_count&&t.display_count,c.is_attribute_param=void 0!=t.is_attribute_param&&t.is_attribute_param,c.disabled_at_zero_count=void 0!=t.disabled_at_zero_count&&t.disabled_at_zero_count,c.collapsed=i,c.filter_display_name=n,c.filter_facet_name=r,"range_filter"==t.filter_type){var _=t.selected_range.start,d=t.selected_range.end,g=t.bucket_range.start,p=t.bucket_range.end;c.fromval=_,c.toval=d,c.minval=g,c.maxval=p}Handlebars.registerHelper("ifEquals",function(e,t,a){return e==t?a.fn(this):a.inverse(this)});var f=$.map(t.items,function(e){return e});f.sort(function(e,t){return e.sequence-t.sequence}),c.items=f,console.log(c);var u=s(c);console.log(document.getElementById("filter-"+a+"-template-content")),document.getElementById("filter-"+a+"-template-content").innerHTML=u,"range_filter"==t.filter_type&&initializeSlider(_,d,g,p)})}"breadcrumbs"==e&&(t.breadcrumbs=l),"headers"==e&&(t.headers=l),"page"==e&&(a.page=l),"items"==e&&(a.products=l,Object.keys(l).length<=0&&($(".productlist__row").addClass("d-none"),$(".productlist__na").removeClass("d-none")))});var l=document.getElementById("products-list-template").innerHTML,s=Handlebars.compile(l);Handlebars.registerHelper("assign",function(e,t,a){a.data.root||(a.data.root={}),a.data.root[e]=t}),Handlebars.registerHelper("ifEquals",function(e,t,a){return e==t?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("ifImagesExist",function(e,t){return console.log(e),Object.keys(e).length>0?t.fn(this):t.inverse(this)});var o={};o.products=a.products,o.show_more=a.page.has_next,console.log(o);var i=s(o);document.getElementById("products-list-template-content").innerHTML=i,product_list_items=$.extend({},a.products),console.log("product_list_items===="),console.log(product_list_items);var l=document.getElementById("filter-header-template").innerHTML,s=Handlebars.compile(l),o={};o.breadcrumbs=t.breadcrumbs,o.headers=t.headers;var i=s(o);document.getElementById("filter-header-template-content").innerHTML=i,console.log(config_facet_names_arr),console.log(facet_list),window.history.replaceState("categoryPage","Category",f)}):(collapsable_load_values[$("input[name='age']").data("facet-name")]=$("input[name='age']").data("collapsable"),collapsable_load_values[$("input[name='category']").data("facet-name")]=$("input[name='category']").data("collapsable"),collapsable_load_values[$("input[name='color']").data("facet-name")]=$("input[name='color']").data("collapsable"),collapsable_load_values[$("input[name='gender']").data("facet-name")]=$("input[name='gender']").data("collapsable"),collapsable_load_values[$("input[name='price']").data("facet-name")]=$("input[name='price']").data("collapsable"),collapsable_load_values[$("input[name='subtype']").data("facet-name")]=$("input[name='subtype']").data("collapsable"),console.log("collapsable_load_values==="),console.log(collapsable_load_values))}}function constructCategoryUrl(e,t,a){var l="";for(item in e){var s="",o=e[item],i=facet_display_data_arr[o];if(o in t){var n="";if(n=-1!==l.indexOf("?")?"&":"?","primary_filter"==i.filter_type&&(n+="pf"),"range_filter"==i.filter_type&&(n+="rf"),t[e[item]].length>1){var r=[];for(fitem in t[e[item]])r.push(a[e[item]][t[e[item]][fitem]]);i.is_attribute_param&&"primary_filter"==i.filter_type?(s=r.join(","),l+=n+"="+i.template+":"+s):(s=r.join("--"),l+="/"+s)}else s=t[e[item]][0],i.is_attribute_param?l+=n+"="+i.template+":"+a[e[item]][s]:l+="/"+a[e[item]][s]}}return l}function removeFilterTag(e){var t=$("input[data-slug='"+e+"'].facet-category");console.log(t),console.log("single==="+e),"price"==e?(t.val(t.data("minval")+";"+t.data("maxval")),facetCategoryChange(t,!0,!0)):(t.removeAttr("checked"),t.trigger("change"))}function initializeSlider(e,t,a,l){$("#price-range").ionRangeSlider({type:"double",from:e,to:t,min:a,max:l,prefix:'<i class="fas fa-rupee-sign" aria-hidden="true"></i> ',onChange:function(e){$("#price-min").val(e.from),$("#price-max").val(e.to)},onFinish:function(e){facetCategoryChange($("#price-range"),!0,!0)}})}console.log("productlisting==="),console.log(config_facet_names_arr);var ajax_data={},page_val=1,collapsable_load_values={};$(function(){$(".kss_sizes .radio-input").prop("checked",!1),$(".select-size input[type=radio]").change(function(e){this.dataset.list_price==this.dataset.sale_price?jQuery("#kss-price-"+this.dataset.product_id+"-"+this.dataset.color_id).html("₹"+this.dataset.sale_price):jQuery("#kss-price-"+this.dataset.product_id+"-"+this.dataset.color_id).html("₹"+this.dataset.sale_price+' <small class="kss-original-price text-muted">₹'+this.dataset.list_price+'</small><span class="kss-discount text-danger">'+this.dataset.discount_per+"% OFF</span>");var t=$(this).closest(".select-size").find("button");t.removeClass("disabled"),t.prop("disabled",!1),t.addClass("cd-add-cart"),t.addClass("align-items-center"),t.addClass("d-flex"),t.addClass("justify-content-center"),t.html('<i class="kss_icon bag-icon-fill icon-sm"></i> Add To Bag')})});var facet_list={},range_facet_list={},filter_tags_list=[];console.log("facet_value_slug_assoc==="),console.log(facet_value_slug_assoc),console.log("facet array==="),console.log(config_facet_names_arr),$(document).ready(function(){var e=$.url().param("page");void 0!=e&&(page_val=e),$(".pl-loader").fadeOut("fast",function(){$("body").removeClass("overflow-h")}),$("body").on("shown.bs.collapse",".collapse",function(){collapsable_load_values[$("input[name='"+$(this).data("field")+"']").data("facet-name")]=!1}),$("body").on("hidden.bs.collapse",".collapse",function(){collapsable_load_values[$("input[name='"+$(this).data("field")+"']").data("facet-name")]=!0}),$("body").on("click","#showMoreProductsBtn",function(){$(this).find(".load-icon-cls").removeClass("d-none"),$(this).prop("disabled",!0);var e=$.url().param("page"),t=window.location.href;console.log("page==="+e),console.log(t.split("?"));var a=t.split("?"),l="";l=a.length>1?"&":"?";var s=1;void 0==e?(t=t+l+"page=2",s=2):(t=t.replace(/page=\d+/,"page="+(parseInt(e)+1)),s=parseInt(e)+1),console.log("ul==="+t),ajax_data.page=s,console.log("ajax_data====="),console.log(ajax_data),$.ajax({method:"POST",url:"/api/rest/v1/product-list",data:JSON.stringify(ajax_data),dataType:"json",contentType:"application/json"}).done(function(e){console.log(e);var a={};$.each(e,function(e,t){"page"==e&&(a.page=t),"items"==e&&(a.products=t)});var l=document.getElementById("products-list-template").innerHTML,s=Handlebars.compile(l);Handlebars.registerHelper("assign",function(e,t,a){a.data.root||(a.data.root={}),a.data.root[e]=t}),Handlebars.registerHelper("ifEquals",function(e,t,a){return e==t?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("ifImagesExist",function(e,t){return console.log(e),Object.keys(e).length>0?t.fn(this):t.inverse(this)});var o={},i=Object.keys(product_list_items).length;for(var n in a.products)product_list_items[i+n]=a.products[n];o.products=product_list_items,Object.keys(product_list_items).length<=0&&($(".productlist__row").addClass("d-none"),$(".productlist__na").removeClass("d-none")),o.show_more=a.page.has_next,console.log("product_list_items======"),console.log(product_list_items);var r=s(o);document.getElementById("products-list-template-content").innerHTML=r,window.history.replaceState("categoryPageUrl","Category page",t)})})});