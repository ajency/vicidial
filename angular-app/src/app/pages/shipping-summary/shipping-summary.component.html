<div id="cd-shadow-layer"></div>

<div id="cd-cart" style="right: 0">
	<div class="kss_shipping_summary slide-out slide-show custom-padding">
		<div *ngIf="shippingDetails" class="scroll-container">
			<!-- svg loader -->
		    <div class="cart-loader__wrapper">
		        <svg width="45px" height="45px" viewBox="0 0 45 45" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
		            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
		                <g id="kss-logo" transform="translate(-5.000000, -10.000000)" fill-rule="nonzero">
		                    
		                    <path id="rotate-svg" class="rotate-svg" d="M27.8946347,46.5232675 L21.5070634,50.3660438 C19.6140816,51.5048656 17.1563192,50.8934981 16.0174974,49.0005163 C15.5006912,48.1414665 15.3253073,47.1196702 15.5260735,46.1374542 L17.1622985,38.132492 C17.4405678,36.7711053 16.992381,35.3628434 15.9784564,34.4127042 L10.0063074,28.8162597 C8.39432901,27.3056899 8.31212108,24.7743646 9.82269081,23.1623862 C10.4760803,22.4651329 11.3574906,22.0248185 12.3074007,21.9211327 L20.0007408,21.0813795 C21.4371658,20.924589 22.6773683,20.005287 23.2450637,18.6765199 L26.278296,11.5768346 C27.1462238,9.54533357 29.4966753,8.60207111 31.5281763,9.46999893 C32.475566,9.87475672 33.2302542,10.6294449 33.635012,11.5768346 L36.6682442,18.6765199 C37.2359397,20.005287 38.4761421,20.924589 39.9125671,21.0813795 L47.6059072,21.9211327 C49.8020023,22.1608437 51.387965,24.1354546 51.1482541,26.3315497 C51.0445683,27.2814599 50.6042539,28.1628701 49.9070005,28.8162597 L43.9348516,34.4127042 C42.920927,35.3628434 42.4727402,36.7711053 42.7510094,38.132492 L44.3872344,46.1374542 C44.8296381,48.3018419 43.4336943,50.4150639 41.2693066,50.8574676 C40.2870907,51.0582339 39.2652944,50.88285 38.4062445,50.3660438 L32.0186733,46.5232675 C30.7499425,45.7599965 29.1633654,45.7599965 27.8946347,46.5232675 Z" fill="#EEBD38" transform="translate(29.956819, 30.043213) rotate(45.000000) translate(-29.956819, -30.043213) ">
		                    </path>

		                    <g id="kid-1" transform="translate(21.000000, 39.000000) rotate(42.000000) translate(-21.000000, -39.000000) translate(9.000000, 22.000000)">
		                        <path d="M12.0236338,33.3545849 C6.36381704,33.5274198 3.02449287,31.8962804 2.00566137,28.4611667 C0.984113969,25.016896 0.52935912,21.5802009 0.641396817,18.1510813 L0.641396817,13.2626501 C0.772552654,12.6239381 1.14166148,12.293108 1.74872328,12.2701598 C2.35578508,12.2472116 2.75594153,12.5780417 2.94919262,13.2626501 L2.9848153,22.0662885 C2.97943914,22.9052903 3.29705834,23.3278422 3.93767288,23.3339442 C4.57828743,23.340046 4.93558982,22.9103244 5.00958002,22.0447788 C5.00056745,10.0374472 4.99606117,3.29079539 4.99606117,1.80482349 C4.72101691,-0.37617077 7.81732007,-0.785899445 7.83466946,1.72030787 C7.87891993,3.1369457 7.86420094,2.65246385 7.97499955,6.49615695 C8.04882657,9.05727337 9.3909336,10.6246089 12.0013208,11.1981637 L12.0013373,11.1908574 C14.4879162,10.6235191 15.7681386,9.05861902 15.8420043,6.49615695 C15.952803,2.65246385 15.9380839,3.1369457 15.9823345,1.72030787 C15.9996838,-0.785899445 19.095987,-0.37617077 18.8209427,1.80482349 C18.8209427,3.29079539 18.8209427,10.2811581 18.8209427,22.7759116 C18.894933,23.641457 19.2522354,24.0711787 19.8928499,24.0650769 C20.5334644,24.0589749 20.8510837,23.636423 20.8457075,22.7974212 L20.8678113,13.2626501 C21.0610624,12.5780417 21.4612189,12.2472116 22.0682807,12.2701598 C22.6753424,12.293108 23.0444513,12.6239381 23.1756071,13.2626501 L23.1756071,18.1510813 C23.4895355,22.8488963 22.7365691,26.7863911 20.9167079,29.9635662 C19.2191229,32.570394 16.2547649,33.7007335 12.0236338,33.3545849 Z" id="Combined-Shape" fill="#FFFFFF"></path>
		                        <rect id="Rectangle-4" fill="#EEBD38" x="10.697193" y="21.8670291" width="1.98867373" height="7.55775543" rx="0.952906158"></rect>
		                        <rect id="Rectangle-4-Copy" fill="#EEBD38" x="6.26086957" y="19.5757576" width="1.98867373" height="7.55775543" rx="0.952906158"></rect>
		                        <rect id="Rectangle-4-Copy" fill="#EEBD38" x="6.26086957" y="19.5757576" width="1.98867373" height="7.55775543" rx="0.952906158"></rect>
		                        <rect id="Rectangle-4-Copy-2" fill="#EEBD38" x="14.8255779" y="19.7791794" width="1.98867373" height="7.55775543" rx="0.952906158"></rect>
		                        <ellipse id="Oval-3" fill="#FFFFFF" cx="12" cy="6.6969697" rx="2.60869565" ry="2.57575758"></ellipse>
		                    </g>
		                </g>
		            </g>
		        </svg>
		    </div>			
			<nav class="navbar navbar-dark bg-dark pt-3 pb-3 ">
				<div class="d-flex align-items-center w-100">
					<div class="">
						<a >
							 <img src="/img/logo-kss.png" xpreview="assets/img/logo-kss.png" class=" img-fluid m-0" width="180px">
					 </a>
					</div>
					<div class="ml-auto align-self-center">
						<h3 class="m-0 text-white kss_highlight btn-pay" (click)="closeCart()"><span aria-hidden="true">&times;</span></h3>
					</div>
				</div>
			</nav>

			<div class="mb-5 py-3 px-3 padding-size">
				<div class="row no-gutter">
					<!-- <div class="col-1">
		             <h3 class="m-0 font-weight-bold back-to-cart">
		               <img (click)="navigateBack()" class="btn-back kss_highlight" src="/img/left-arrow.png" style="width:20px;">
		             </h3>
		           </div> -->
					<div class="col-8">
						<h3 class="modal-title font-weight-bold" id="exampleModalLabel">Review your order</h3>
					</div>
					<div class="col-4 text-right">
						<h6 class="text-muted mt-2">STEP: 2 / 2</h6>
					</div>
				</div>
				<hr>
				<!-- <div class="alert alert-success mb-3" role="alert">
				  <b><i class="fas fa-truck"></i> Standard Delivery</b> (Free delivery)
				</div> -->
				<div>
					<label class="w-100 border-bottom text-left">
						<div class="d-flex align-items-start address-block review-section">
							<div class="text-left pl-2 flex-fill">
								<h3 class="kss-title font-weight-bold d-flex align-items-center w-100">{{shippingDetails.address.name}} 
								<!-- <i class="fas fa-pencil-alt number-edit cursor-pointer ml-2 mt-1" (click)="editShippingAddress()"></i> --></h3>
								<p class="h6 line-height-5">
									{{shippingDetails.address.address}}, {{shippingDetails.address.city}}, {{shippingDetails.address.state}} {{shippingDetails.address.pincode}}
								</p>
								<p class="h6 my-3">
									Mobile: <b class="font-weight-bold">{{shippingDetails.address.phone}}</b>
								</p>
								<p *ngIf="userEmail" class="h6 my-3">
									Order Tracking emails will be sent to the following address : <b class="font-weight-bold">{{userEmail}}</b>
									<i class="fas fa-pencil-alt number-edit cursor-pointer ml-2 mt-1" (click)="editUserInfo()"></i>
								</p>
							</div>
						</div>
					</label>
				</div>

				<ul *ngFor="let item of shippingDetails.items" class="cd-cart-items list-unstyled mt-2">
				  <li class="p-0 pb-2">
				    <div class="primary-info d-flex">
				      <div class="product-img">
				      	<a href="{{item.href}}" [ngClass]="{'variant-placeholder' : item.attributes.images[0]=='/img/placeholder.svg'}">
				      		<!-- <div class="img" style="background-image: url('/img/thumbnail/6front@thumb.jpg');"></div> -->
				      		<img src="{{item.attributes.images[0]}}" class="lazyload img-fit" data-srcset="{{item.attributes.images[0]}} 50w, {{item.attributes.images[1]}} 100w, {{item.attributes.images[2]}} 150w" sizes="50px">
				      	</a>
				        
				      </div>
				      <div class="product-detail">
				      	<a href="{{item.href}}" class="d-inline-flex section-title text-black">
					        <label class="m-0 cursor-pointer text-capitalize">
					          {{item.attributes.title}}
					        </label>
					    </a>
				        	<div class="d-flex flex-row align-items-center py-1">
							  <div class="size-qty align-self-center">
							  	<label class="m-0">Size:</label>
							  </div>
							  <div class="pl-2 pr-4 align-self-center">
							  	{{item.attributes.size}}
							  </div>
							  <div class="qty align-self-center mt-0">
							  	<label class="m-0">Qty:</label>
							  </div>
							  <div class="pl-2">
							  	{{item.quantity}}
							  </div>
							</div>
				       <!--  <div class="product-size text-muted ">
				         <p class="sub-text mt-3">Estimated Delivery <b class="text-dark">23 Aug 2018</b></p>
				        </div> -->
				      </div>
				    </div>
				  </li>
				</ul>

				<div class="cart-summary mt-4">
				  <h4 class="mb-1 font-weight-bold">Price Summary</h4>
				  <p class="sub-text mb-3">Includes GST and all government taxes</p>
<!-- 
				  <div class="d-flex justify-content-between py-1">
				    <div>
				    	<label class="text-muted f-w-4 m-0">
				    		Cart Total
				    	</label>
				    </div>
				    <div> ₹{{shippingDetails.summary.total}}</div>
				  </div> -->
<!-- 				  <div class="" id="cart-details">
				    <div class="d-flex justify-content-between py-1">
				      <div><label class="text-muted f-w-4 m-0">Cart Discount</label></div>
				      <div class="text-success">- ₹440</div>
				    </div>
				    <div class="d-flex justify-content-between py-1">
				      <div><label class="text-muted f-w-4 m-0">Estimated Tax</label></div>
				      <div>₹180</div>
				    </div>
				    <div class="d-flex justify-content-between py-1">
				      <div><label class="text-muted f-w-4 m-0">Coupon Discount</label></div>
				      <div class="text-success">- ₹20</div>
				    </div>
				  </div> -->
				  <div class="d-flex justify-content-between py-1">
				    <div>
				    	<label class="text-muted f-w-4 m-0">
				    		Total item price
				    	</label>
				    </div>
				    <div> ₹{{shippingDetails.summary.total}} </div>
				  </div>
				  <div class="d-flex justify-content-between py-1">
				    <div><label class="text-muted f-w-4 m-0">Shipping Fee</label></div>
				    <div class="">₹{{shippingDetails.summary.shipping_fee}}</div>
				  </div>
				</div>
				<hr class="dashed">
				<div class="cd-cart-total">
				  <h5 class="font-weight-bold">Total Payable<span>₹{{shippingDetails.summary.final_price}}</span></h5>
				</div>
				<h5 *ngIf="shippingDetails.summary.savings" class="font-weight-bold text-success w-50 line-height-5">Your total savings on this order ₹{{shippingDetails.summary.savings}}</h5>
			</div>

			<div *ngIf="!showUserInfoModal" class="fixed-bottom d-show pl-3 pr-3">
			  <div class="row no-gutters py-2">
		      <div class="col-12 text-center">
		          <button id="payment-details" type="button" class=" btn kss-btn kss-btn--big mt-1 mb-1 d-flex align-items-center justify-content-center" (click)="navigateToPaymentPage()">Pay ₹{{shippingDetails.summary.final_price}}  <img src="/img/pay-u-icon.png" class="ml-2" width="50"> <i class="fas fa-angle-right position-absolute r-0 mt-i-1"></i></button>
		      </div>
			  </div>
			</div>

			<div class="modal fade show" id="user-info" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content ">
			      <div class="modal-body">

			        <div class="state-1">
			          <div class="d-flex align-items-center">
			            <!-- <div class="pr-3">
			              <h3  class="m-0 font-weight-bold kss_highlight" data-dismiss="modal" aria-label="Close">
			                <img class="btn-back kss_highlight" src="/img/close-icon.png" style="width:20px;"/>
			              </h3>
			            </div> -->
			            <div class="">
			              <h3 class="modal-title font-weight-bold mt-1" id="exampleModalLabel">User Info</h3>
			            </div>
			          </div>

			          <p class="sub-text w-75 mt-3">Please provide following details</p>
			          <form #userInfo="ngForm">
			            <div class="form-group mb-0">
			              <input type="text" class="form-control form-control-lg" id="frm-name" name="name" required [(ngModel)]="shippingDetails.user_info.name" [ngClass]="{'has-value' : shippingDetails.user_info.name}">
			              <label class="control-label">Name</label>			              
			            </div>
			            <div class="form-group mb-0">
			            	<input type="email" class="form-control form-control-lg" id="frm-email" name="email" required [(ngModel)]="shippingDetails.user_info.email" [ngClass]="{'has-value' : shippingDetails.user_info.email}" pattern="[^ @]+@[^ @]+\.[^ @]+">
				            <label class="control-label">Email Id</label>
			            </div>
			          </form>
			          <div id="kss_cart" class="pt-3 d-flex align-items-center justify-content-between">
						<button *ngIf="showCancelButton" id="cancel" class="btn kss-btn kss-btn--outline-secondary kss-btn--big mr-3" (click)="hideModal()" >Cancel</button>
						<button id="save" class="btn kss-btn kss-btn--big mt-0" [disabled]="!userInfo.valid" (click)="saveUserInfo()" >Save</button>
					</div>
			        </div>

			      </div>
			    </div>
			  </div>
			</div>


		</div>
	</div>
</div>	